<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>proverka.co - Ανιχνευτής AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #111827;
      --accent: #4f46e5;
      --bg: #f9fafb;
      --border: #e5e7eb;
      --gray-light: #f3f4f6;
      --dark: #0f172a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--primary);
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    main {
      max-width: 760px;
      margin: 60px auto;
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }

    p.subheading {
      font-size: 1.1rem;
      color: #6b7280;
      text-align: center;
      margin-bottom: 30px;
    }

    textarea {
      width: 100%;
      height: 160px;
      border: 1px solid var(--border);
      padding: 15px;
      font-size: 1rem;
      border-radius: 10px;
      resize: none;
      margin-bottom: 20px;
    }

    button {
      width: 100%;
      background: var(--accent);
      color: white;
      padding: 15px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #4338ca;
    }

    .info {
      margin-top: 25px;
      font-size: 0.95rem;
      color: #6b7280;
      text-align: center;
    }

    #resultBox {
      margin-top: 30px;
      padding: 20px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--gray-light);
      transition: all 0.3s ease;
    }

    .highlight {
  background-color: #e0e7ff; /* light purple */
  color: #3730a3;            /* deep indigo text */
  font-weight: 600;
  padding: 2px 4px;
  border-radius: 4px;
}

    footer {
      margin-top: 80px;
      padding: 60px 20px;
      background: var(--dark);
      color: white;
      text-align: center;
    }

    .faq-section {
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-section h2 {
      color: #818cf8;
      font-size: 1.3rem;
      letter-spacing: 1px;
      margin-bottom: 40px;
      border-bottom: 1px solid #334155;
      padding-bottom: 10px;
    }

    .faq-item {
      border-top: 1px solid #334155;
      padding: 30px 0;
    }

    .faq-item:last-child {
      border-bottom: 1px solid #334155;
    }

    .faq-section h3 {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .faq-section p {
      font-size: 1rem;
      color: #d1d5db;
      margin-bottom: 0;
    }

    .loader {
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 4px solid var(--accent);
      border-top: 4px solid transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    a[href*="index_gr.html"]:hover {
  background: #e0e7ff;
}
header {
  background: white;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

/* Contains layout & spacing */
.header-container {
  padding: 20px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

  .logo {
    font-size: 1.5rem;
    font-weight: 700;
    color: #4f46e5;
  }

  .right-side {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .burger {
    display: none;
    font-size: 1.8rem;
    cursor: pointer;
    padding: 8px;
  }

  .menu {
    display: none;
    flex-direction: column;
    gap: 10px;
    position: absolute;
    top: 60px;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    padding: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    z-index: 999;
    min-width: 160px;
    text-align: center;
  }

  .menu .label {
    font-size: 1rem;
    font-weight: 500;
    color: #6b7280;
    background: none;
    padding: 4px 0;
    cursor: default;
  }

  .menu a {
    font-size: 0.95rem;
    font-weight: 600;
    text-decoration: none;
    background: #f3f4f6;
    padding: 6px 12px;
    border-radius: 8px;
    color: #4f46e5;
    transition: background 0.2s;
  }

  .menu a:hover {
    background: #e0e7ff;
  }

  .language-links {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .language-links a {
    font-size: 0.95rem;
    font-weight: 600;
    text-decoration: none;
    background: #f3f4f6;
    padding: 6px 12px;
    border-radius: 8px;
    color: #4f46e5;
    transition: background 0.2s;
  }

  .language-links a:hover {
    background: #e0e7ff;
  }

  .highlight-pop {
    background-color: #4f46e5;
    color: white;
    transition: all 0.2s ease;
    transform: scale(1.2);
    border-radius: 10px;
    padding: 5px;
  }

  .usage {
    transition: all 0.2s ease;
  }

  .desktop-only {
  display: block;
}

.mobile-only {
  display: none;
}

@media (max-width: 768px) {
  .desktop-only {
    display: none;
  }

  .mobile-only {
    display: block;
  }
}

  @media (max-width: 768px) {
    .burger {
      display: block;
    }

    .language-links {
      display: none;
    }
  }

  @media (min-width: 769px) {
    .menu {
      display: none !important;
    }
  }
  @media (max-width: 768px) {
  main {
    margin-top: 20px;  /* or 0 if you want no gap */
  }
}
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo">proverka.co</div>
  
      <!-- Usage counter (desktop only) -->
      <div class="usage desktop-only"></div>
  
      <div class="right-side">
        <!-- Desktop language section -->
        <div class="language-links">
          <a href="/">🇧🇬 Bulgarian</a>
          <a href="/ro">🇷🇴 Romanian</a>
          <a href="/rs">🇷🇸 Serbian</a>
          <a href="/mk">🇲🇰 Macedonian</a>
        </div>
  
        <!-- Burger icon -->
        <div class="burger" onclick="toggleMenu()">☰</div>
  
        <!-- Burger menu for mobile -->
        <div id="langMenu" class="menu">
          <!-- Usage counter (mobile only) -->
          <div class="usage mobile-only" style="margin-bottom: 10px;"></div>
  
          <a href="/">🇧🇬 Bulgarian</a>
          <a href="/ro">🇷🇴 Romanian</a>
          <a href="/rs">🇷🇸 Serbian</a>
          <a href="/mk">🇲🇰 Macedonian</a>
        </div>
      </div>
    </div>
  </header>

  <main>
    <h1>Μάθε αν το κείμενο γράφτηκε από άνθρωπο ή AI</h1>
    <p class="subheading">Γρήγορο εργαλείο για τον έλεγχο περιεχομένου</p>

    <div id="tokenDisplay" class="info">Υπόλοιποι έλεγχοι: –</div>

    <textarea id="inputText" placeholder="Επικόλλησε το κείμενό σου εδώ…"></textarea>
    <button id="checkBtn">Έλεγχος κειμένου</button>

    <div id="resultBox"></div>
  </main>

  <footer>
    <div class="faq-section">
      <h2>ЧΣυχνές ερωτήσεις</h2>
  
      <div class="faq-item">
        <h3>🧠 Τι είναι το proverka.co;</h3>
        <p>
            Το Proverka.co είναι το πρώτο ελληνικό εργαλείο που ανιχνεύει αν ένα κείμενο έχει γραφτεί από άνθρωπο ή δημιουργηθεί από τεχνητή νοημοσύνη. Έχει αναπτυχθεί από την StartUp ομάδα του “AUBG” και έχει εκπαιδευτεί ειδικά για την ελληνική γλώσσα. Η αποστολή μας είναι να επαναφέρουμε την εμπιστοσύνη στον γραπτό λόγο – στην εκπαίδευση, τα μέσα ενημέρωσης και τον επαγγελματικό χώρο.
      </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>⚙️ Πώς λειτουργεί το εργαλείο;</h3>
        <p>
            Απλώς επικόλλησε το κείμενό σου στο πεδίο, πάτησε «Έλεγχος κειμένου» και περίμενε λίγα δευτερόλεπτα. Θα λάβεις μια ξεκάθαρη ανάλυση για το αν γράφτηκε από άνθρωπο ή AI, σε ποια γλώσσα είναι το περιεχόμενο, ποιο είναι το ποσοστό τεχνητής δημιουργίας και ποια σημεία είναι ύποπτα.
      </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>📊 Τι κάνει το proverka.co διαφορετικό;
        </h3>
        <p>
            Το Proverka.co έχει αναπτυχθεί και εκπαιδευτεί ειδικά για την ελληνική γλώσσα και το ελληνικό πλαίσιο. Δημιουργήθηκε από ελληνική ομάδα με έμφαση στην ακρίβεια, την αξιοπιστία και την πρακτική εφαρμογή στην εκπαίδευση και τον επαγγελματικό χώρο. Ο αλγόριθμός μας μαθαίνει συνεχώς, προσφέροντας όλο και καλύτερα αποτελέσματα.
        </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>🚀 Τι σχεδιάζετε για το μέλλον;</h3>
        <p>
            Αυτή τη στιγμή αναπτύσσουμε ένα σύστημα που θα ενσωματωθεί σε σχολεία και πανεπιστήμια. Θα μπορεί να αποθηκεύει προηγούμενα κείμενα μαθητών και φοιτητών, να συγκρίνει νέα με τα παλιά και να εντοπίζει αλλαγές στο ύφος και την έκφραση. Με αυτόν τον τρόπο, θα συμβάλουμε στην ανίχνευση καταχρήσεων της τεχνητής νοημοσύνης και θα προστατεύσουμε την αυθεντικότητα του γραπτού λόγου.
        </p>
      </div>
    </div>
    <div style="margin-top: 40px; font-size: 0.75rem; color: #6b7280; text-align: center;">
        Δημιουργήθηκε από τον Pavel Dimitrov, τον Nikola Kostov, τη Natalia Vasileva, τον Todor Mitsin και τον Kris Ivanov με αγάπη για το AUBG StartUp Weekend! ❤️
    </div>
  </footer>

  <script>
    function toggleMenu() {
    const menu = document.getElementById("langMenu");
    menu.style.display = menu.style.display === "flex" ? "none" : "flex";
  }

  document.addEventListener("click", function (e) {
    const menu = document.getElementById("langMenu");
    const burger = document.querySelector(".burger");
    if (!menu.contains(e.target) && !burger.contains(e.target)) {
      menu.style.display = "none";
    }
  });
    const langToFlag = (lang) => {
      const map = {
        en: '🇺🇸',
    bg: '🇧🇬',
    sr: '🇷🇸', // Serbian
    hr: '🇭🇷', // Croatian
    mk: '🇲🇰', // Macedonian
    ro: '🇷🇴', // Romanian
    el: '🇬🇷', // Greek
    sq: '🇦🇱', // Albanian
    bs: '🇧🇦', // Bosnian
    sl: '🇸🇮', // Slovenian
    hu: '🇭🇺', // Hungarian
    tr: '🇹🇷', // Turkish

    fr: '🇫🇷',
    de: '🇩🇪',
    es: '🇪🇸',
    it: '🇮🇹',
    un: '❔', // Unknown
      };
      return map[lang] || '🌐';
    };

    document.getElementById('checkBtn').addEventListener('click', detectText);

    async function fetchTokens() {
      try {
        const res = await fetch('/tokens');
        const data = await res.json();
        if (data.success) {
          document.getElementById('tokenDisplay').innerText = "Υπόλοιποι έλεγχοι: " + data.tokens_left;
        }
      } catch {
        document.getElementById('tokenDisplay').innerText = "Υπόλοιποι έλεγχοι: Σφάλμα";
      }
    }

    function getResultLabel(percentage) {
  const val = Number(percentage);
  if (val <= 20) return "✅ Ανθρώπινο κείμενο";
  if (val <= 49) return "🟡 Αναδιαμορφωμένο κείμενο AI ή Humanizer";
  if (val <= 79) return "🟠 Πιθανώς δημιουργημένο από AI";
  return "❌ Σχεδόν σίγουρα δημιουργημένο από AI";
}

    async function detectText() {
      const text = document.getElementById('inputText').value;
      const resultDiv = document.getElementById('resultBox');
      resultDiv.innerHTML = '<div class="loader"></div>';

      try {
        const res = await fetch('/detect', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text })
        });

        const data = await res.json();
        if (!data.success) {
          resultDiv.innerHTML = `<p style='color:red;'>❌ ${data.message}</p>`;
          document.getElementById('tokenDisplay').innerText = "Υπόλοιπα tokens: 0";
          return;
        }

        const result = data.data;
        const special = result.specialSentences || [];

        let highlightedText = text;

      // Sort longer sentences first to avoid nested replacements
      special.sort((a, b) => b.length - a.length);

      special.forEach(sentence => {
        const safeSentence = sentence
          .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
          .replace(/\s+/g, '\\s+'); // Match flexible whitespace

        const regex = new RegExp(safeSentence, 'gi');
        highlightedText = highlightedText.replace(
          regex,
          match => `<span class="highlight">${match}</span>`
        );
      });

        resultDiv.innerHTML = `
          <p><strong>Αποτέλεσμα:</strong> ${getResultLabel(result.fakePercentage)}</p>
          <p><strong>Γλώσσα:</strong> ${langToFlag(result.detected_language)} (${result.detected_language})</p>
          <p><strong>Ποσοστό ψευδούς περιεχομένου:</strong> ${result.fakePercentage}%</p>
          <p><strong>Маркиран κείμενο:</strong></p>
          <div style="white-space: pre-wrap;">${highlightedText}</div>
        `;

        document.getElementById('tokenDisplay').innerText = "Υπόλοιποι έλεγχοι: " + data.tokens_left;
      } catch (err) {
        console.error("Σφάλμα κατά τον έλεγχο:", err);
        resultDiv.innerHTML = "❌ Προέκυψε σφάλμα κατά την επεξεργασία.";
      }
    }

    setInterval(() => {
  fetch('/usage')
    .then(response => {
      if (!response.ok) throw new Error(`Σφάλμα HTTP! κατάσταση: ${response.status}`);
      return response.json();
    })
    .then(data => {
      const usageText = `${data.requests} Έλεγχοι μέχρι στιγμής.`;

      // Get all .usage elements (e.g. desktop + mobile)
      const usageEls = document.querySelectorAll('.usage');

      // Only update if the first one hasn’t changed
      if (usageEls.length > 0 && usageEls[0].innerHTML === usageText) {
        console.log('No change in usage count');
        return;
      }

      usageEls.forEach(el => {
        el.innerHTML = usageText;
        el.classList.add('highlight-pop');

        setTimeout(() => {
          el.classList.remove('highlight-pop');
        }, 2000);
      });
    })
    .catch(error => {
      console.error('Error fetching /usage:', error);
    });
}, 1000);

    fetchTokens();
  </script>
</body>
</html>