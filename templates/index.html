<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>proverka.co - AI –î–µ—Ç–µ–∫—Ç–æ—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #111827;
      --accent: #4f46e5;
      --bg: #f9fafb;
      --border: #e5e7eb;
      --gray-light: #f3f4f6;
      --dark: #0f172a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--primary);
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    header {
      padding: 20px 40px;
      background: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    main {
      max-width: 760px;
      margin: 60px auto;
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }

    p.subheading {
      font-size: 1.1rem;
      color: #6b7280;
      text-align: center;
      margin-bottom: 30px;
    }

    textarea {
      width: 100%;
      height: 160px;
      border: 1px solid var(--border);
      padding: 15px;
      font-size: 1rem;
      border-radius: 10px;
      resize: none;
      margin-bottom: 20px;
    }

    button {
      width: 100%;
      background: var(--accent);
      color: white;
      padding: 15px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #4338ca;
    }

    .info {
      margin-top: 25px;
      font-size: 0.95rem;
      color: #6b7280;
      text-align: center;
    }

    #resultBox {
      margin-top: 30px;
      padding: 20px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--gray-light);
      transition: all 0.3s ease;
    }

    .highlight {
  background-color: #e0e7ff; /* light purple */
  color: #3730a3;            /* deep indigo text */
  font-weight: 600;
  padding: 2px 4px;
  border-radius: 4px;
}

    footer {
      margin-top: 80px;
      padding: 60px 20px;
      background: var(--dark);
      color: white;
      text-align: center;
    }

    .faq-section {
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-section h2 {
      color: #818cf8;
      font-size: 1.3rem;
      letter-spacing: 1px;
      margin-bottom: 40px;
      border-bottom: 1px solid #334155;
      padding-bottom: 10px;
    }

    .faq-item {
      border-top: 1px solid #334155;
      padding: 30px 0;
    }

    .faq-item:last-child {
      border-bottom: 1px solid #334155;
    }

    .faq-section h3 {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .faq-section p {
      font-size: 1rem;
      color: #d1d5db;
      margin-bottom: 0;
    }

    .loader {
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 4px solid var(--accent);
      border-top: 4px solid transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">proverka.co</div>
    <div style="font-size: 1.1rem; font-weight: 500; color: #6b7280;">AI –î–µ—Ç–µ–∫—Ç–æ—Ä</div>
  </header>

  <main>
    <h1>–†–∞–∑–±–µ—Ä–∏ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç—ä—Ç –µ –ø–∏—Å–∞–Ω –æ—Ç —á–æ–≤–µ–∫ –∏–ª–∏ AI</h1>
    <p class="subheading">–ë—ä—Ä–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</p>

    <div id="tokenDisplay" class="info">–û—Å—Ç–∞–≤–∞—â–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏: --</div>

    <textarea id="inputText" placeholder="–ü–æ—Å—Ç–∞–≤–∏ —Ç–µ–∫—Å—Ç–∞ —Å–∏ —Ç—É–∫..."></textarea>
    <button id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏ —Ç–µ–∫—Å—Ç–∞</button>

    <div id="resultBox"></div>
  </main>

  <footer>
    <div class="faq-section">
      <h2>–ß–µ—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏</h2>
  
      <div class="faq-item">
        <h3>üß† –ö–∞–∫–≤–æ –µ proverka.co?</h3>
        <p>
          Proverka.co –µ –ø—ä—Ä–≤–∏—è—Ç –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ–π—Ç–æ –æ—Ç–∫—Ä–∏–≤–∞ –¥–∞–ª–∏ –µ–¥–∏–Ω —Ç–µ–∫—Å—Ç –µ –Ω–∞–ø–∏—Å–∞–Ω –æ—Ç —á–æ–≤–µ–∫ –∏–ª–∏ —Å—ä–∑–¥–∞–¥–µ–Ω –æ—Ç –∏–∑–∫—É—Å—Ç–≤–µ–Ω –∏–Ω—Ç–µ–ª–µ–∫—Ç. –†–∞–∑—Ä–∞–±–æ—Ç–µ–Ω –µ –æ—Ç –º–µ—Å—Ç–µ–Ω –µ–∫–∏–ø –∏ –µ –æ–±—É—á–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏—è –µ–∑–∏–∫. –ù–∞—à–∞—Ç–∞ –º–∏—Å–∏—è –µ –¥–∞ –≤—ä—Ä–Ω–µ–º –¥–æ–≤–µ—Ä–∏–µ—Ç–æ –≤ –ø–∏—Å–∞–Ω–æ—Ç–æ —Å–ª–æ–≤–æ ‚Äì –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ—Ç–æ, –º–µ–¥–∏–∏—Ç–µ –∏ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞—Ç–∞ —Å—Ä–µ–¥–∞.
      </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ä—Ç?</h3>
        <p>
          –ü—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç–∞–≤–∏ —Ç–µ–∫—Å—Ç–∞ —Å–∏ –≤ –ø–æ–ª–µ—Ç–æ, –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äû–ü—Ä–æ–≤–µ—Ä–∏ —Ç–µ–∫—Å—Ç–∞‚Äú –∏ –∏–∑—á–∞–∫–∞–π –Ω—è–∫–æ–ª–∫–æ —Å–µ–∫—É–Ω–¥–∏. –©–µ –ø–æ–ª—É—á–∏—à —è—Å–µ–Ω –∞–Ω–∞–ª–∏–∑ –¥–∞–ª–∏ –µ –ø–∏—Å–∞–Ω –æ—Ç —á–æ–≤–µ–∫ –∏–ª–∏ AI, –Ω–∞ –∫–∞–∫—ä–≤ –µ–∑–∏–∫ –µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ, –∫–æ–ª–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –µ —Ñ–∞–ª—à–∏–≤–æ –∏ –∫–æ–∏ —á–∞—Å—Ç–∏ —Å–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª–Ω–∏.
      </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>üìä –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ proverka.co —Ä–∞–∑–ª–∏—á–µ–Ω?</h3>
        <p>
          Proverka.co –µ —Ä–∞–∑—Ä–∞–±–æ—Ç–µ–Ω –∏ –æ–±—É—á–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏—è –µ–∑–∏–∫ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç. –°—ä–∑–¥–∞–¥–µ–Ω –µ –æ—Ç –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∫–∏–ø —Å —Ñ–æ–∫—É—Å –≤—ä—Ä—Ö—É —Ç–æ—á–Ω–æ—Å—Ç, –Ω–∞–¥–µ–∂–¥–Ω–æ—Å—Ç –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞ —É–ø–æ—Ç—Ä–µ–±–∞ –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ—Ç–æ –∏ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞—Ç–∞ —Å—Ä–µ–¥–∞. –ù–∞—à–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º —Å–µ —Å–∞–º–æ–æ–±—É—á–∞–≤–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∑–∞ –¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –≤—Å–µ –ø–æ-–¥–æ–±—Ä–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏.
        </p>
      </div>
  
      <div class="faq-item">
        <hr style="border: none;">
        <h3>üöÄ –ö–∞–∫–≤–æ –ø–ª–∞–Ω–∏—Ä–∞—Ç–µ –∑–∞ –±—ä–¥–µ—â–µ—Ç–æ?</h3>
        <p>
          –í –º–æ–º–µ–Ω—Ç–∞ –∏–∑–≥—Ä–∞–∂–¥–∞–º–µ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—è—Ç–æ —â–µ —Å–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–∞ —Å —É—á–∏–ª–∏—â–∞ –∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∏. –¢—è —â–µ –º–æ–∂–µ –¥–∞ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –ø—Ä–µ–¥–∏—à–Ω–∏ —Ç–µ–∫—Å—Ç–æ–≤–µ –Ω–∞ —É—á–µ–Ω–∏—Ü–∏ –∏ —Å—Ç—É–¥–µ–Ω—Ç–∏, –¥–∞ —Å—Ä–∞–≤–Ω—è–≤–∞ –Ω–æ–≤–∏ —Å —Ç—è—Ö –∏ –¥–∞ –∑–∞—Å–∏—á–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ —Å—Ç–∏–ª –∏ –∏–∑–∫–∞–∑. –¢–∞–∫–∞ —â–µ –ø–æ–º–æ–≥–Ω–µ–º –∑–∞ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–∏ —Å AI –∏ —â–µ –∑–∞—â–∏—Ç–∏–º –∞–≤—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ø–∏—Å–∞–Ω–µ—Ç–æ.
        </p>
      </div>
    </div>
    <div style="margin-top: 40px; font-size: 0.75rem; color: #6b7280; text-align: center;">
      –°—ä–∑–¥–∞–¥–µ–Ω–æ –æ—Ç –ü–∞–≤–µ–ª –î–∏–º–∏—Ç—Ä–æ–≤, –ù–∏–∫–æ–ª–∞ –ö–æ—Å—Ç–æ–≤, –ù–∞—Ç–∞–ª–∏—è –í–∞—Å–∏–ª–µ–≤–∞, –¢–æ–¥–æ—Ä –ú–∏—Ü–∏–Ω –∏ –ö—Ä–∏—Å –ò–≤–∞–Ω–æ–≤ –∑–∞ AUBG StartUp Weekend! ‚ù§Ô∏è
    </div>
  </footer>

  <script>
    const langToFlag = (lang) => {
      const map = {
        en: 'üá∫üá∏',
        bg: 'üáßüá¨',
        fr: 'üá´üá∑',
        de: 'üá©üá™',
        es: 'üá™üá∏',
        it: 'üáÆüáπ',
        un: 'üè≥Ô∏è'
      };
      return map[lang] || 'üåê';
    };

    document.getElementById('checkBtn').addEventListener('click', detectText);

    async function fetchTokens() {
      try {
        const res = await fetch('/tokens');
        const data = await res.json();
        if (data.success) {
          document.getElementById('tokenDisplay').innerText = "–û—Å—Ç–∞–≤–∞—â–∏ —Ç–æ–∫–µ–Ω–∏: " + data.tokens_left;
        }
      } catch {
        document.getElementById('tokenDisplay').innerText = "–û—Å—Ç–∞–≤–∞—â–∏ —Ç–æ–∫–µ–Ω–∏: –ì—Ä–µ—à–∫–∞";
      }
    }

    function getResultLabel(percentage) {
  const val = Number(percentage);
  if (val <= 20) return "‚úÖ –ß–æ–≤–µ—à–∫–∏ —Ç–µ–∫—Å—Ç (0‚Äì20%)";
  if (val <= 49) return "üü° –°–º–µ—Å–µ–Ω —Ç–µ–∫—Å—Ç (–ü—Ä–µ—Ä–∞–±–æ—Ç–µ–Ω –æ—Ç AI) (21‚Äì49%)";
  if (val <= 79) return "üü† –í–µ—Ä–æ—è—Ç–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω –æ—Ç AI (50‚Äì79%)";
  return "‚ùå –ü–æ—á—Ç–∏ —Å–∏–≥—É—Ä–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω –æ—Ç AI (80‚Äì100%)";
}

    async function detectText() {
      const text = document.getElementById('inputText').value;
      const resultDiv = document.getElementById('resultBox');
      resultDiv.innerHTML = '<div class="loader"></div>';

      try {
        const res = await fetch('/detect', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text })
        });

        const data = await res.json();
        if (!data.success) {
          resultDiv.innerHTML = `<p style='color:red;'>‚ùå ${data.message}</p>`;
          document.getElementById('tokenDisplay').innerText = "–û—Å—Ç–∞–≤–∞—â–∏ —Ç–æ–∫–µ–Ω–∏: 0";
          return;
        }

        const result = data.data;
        const special = result.specialSentences || [];

        let highlightedText = text;

      // Sort longer sentences first to avoid nested replacements
      special.sort((a, b) => b.length - a.length);

      special.forEach(sentence => {
        const safeSentence = sentence
          .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
          .replace(/\s+/g, '\\s+'); // Match flexible whitespace

        const regex = new RegExp(safeSentence, 'gi');
        highlightedText = highlightedText.replace(
          regex,
          match => `<span class="highlight">${match}</span>`
        );
      });

        resultDiv.innerHTML = `
          <p><strong>–†–µ–∑—É–ª—Ç–∞—Ç:</strong> ${getResultLabel(result.fakePercentage)}</p>
          <p><strong>–ï–∑–∏–∫:</strong> ${langToFlag(result.detected_language)} (${result.detected_language})</p>
          <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç —Ñ–∞–ª—à–∏–≤–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:</strong> ${result.fakePercentage}%</p>
          <p><strong>–ú–∞—Ä–∫–∏—Ä–∞–Ω —Ç–µ–∫—Å—Ç:</strong></p>
          <div style="white-space: pre-wrap;">${highlightedText}</div>
        `;

        document.getElementById('tokenDisplay').innerText = "–û—Å—Ç–∞–≤–∞—â–∏ —Ç–æ–∫–µ–Ω–∏: " + data.tokens_left;
      } catch (err) {
        console.error("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞:", err);
        resultDiv.innerHTML = "‚ùå –í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞.";
      }
    }

    fetchTokens();
  </script>
</body>
</html>